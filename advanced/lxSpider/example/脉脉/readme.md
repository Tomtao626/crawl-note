##脉脉采集系统

### 测试结果（2021/05）:
- 根据观察和测试，网页版脉脉搜索结果单次最多展示数据1580条，单次检索列表超过100页偶尔会返回脏数据。
- 脉脉APP没有展示上限，可以通过app进行精准高级搜索。
- 账号A以十秒一次的频里采集列表页，正常采集一万条。
- 账号A以一秒一次的频率采集列表页，采集了2万条被封。
- 账号被封后难以解封，需要联系客服。

### 测试结果（2021/08）:
- 通过app搜列表，通过web采详情。
- 账号A以十秒一次的频里采集列表页，采集200条被封。
- 账号被封后联系客服也无法解封。

脉脉之前每晚小检、每周大检就算了，上周起又加了新的风控。
浏览器指纹校验，单纯的用协议请求或者驱动访问200条就封号。

经过测试，在requests跑的时候，把真实浏览器的页面打开登录上去，似乎过了检验

---


## 网页版检索策略：
- 列表页采集：采用全国县区名称进行检索采集，目前整合了全国县区总数3200处，通过遍历区县列表进行采集。如果某区检索结果超过1500条，则采用二次检索规则，通过百家姓遍历，以“XX区 李”为搜索条件重新检索。
- 详情页采集：根据列表页的链接采集详情页，并根据详情页中的用户推荐列表进行深度采集，新采集的用户保存到列表页。
- 该策略仅适合大范围采集，精准行业采集应该使用APP接口。

#### 网页版采集流程图

![网页版采集流程图](static/process1.png?=100x#pic_center)

## APP检索策略
通过app上提供的高级搜索标签进行检索，根据省市和行业标签进行分类。

顶级行业名称-->细分行业名称-->职业方向

- 金融业->银行业->（银行柜员、销售、理财经理/顾问、保险代理人、信贷业务、财务/审计/税务、基金经理、技术/研发、人力资源(HR)/人事、行政/后勤/文员等）
- IT/互联网->云计算/大数据/人工智能->（研发、产品、数据分析、销售、设计、测试、运营、项目管理、风控、政府关系、客服、法务、财务、采购、人力资源、行政/后勤/文员、运维等）

---

### 程序启动说明：
- 1、appCrawl是通过app接口采集，webCrawl是web接口采集
- 2、需要在appCrawl目录中的config文件里填上access_token（cookie中的参数）
- 3、为了防止被封号，将列表页和详情页采集分开存入不同的表中


### 采集难点：
- 封号问题严重，封设备
- 账号比较棘手，虚拟号无法注册，我通过派单收号。
- 新注册后的账号需要开通会员才能进行搜索。


### 备注
- 开了vip的号通过app采集搜索列表，没开vip的号通过web采集详情
- 目前有用户详情页的encode_mmid时,采集的账号可以不开会员